---
import type { GlobalSettings } from "../types/microcms";

interface Props {
  currentPath: string;
  settings: GlobalSettings;
}

const { currentPath, settings } = Astro.props;
const base = import.meta.env.BASE_URL.replace(/\/$/, "");

const navItems = [
  { href: `${base}/about`, icon: "person", label: "作家について (About)" },
  { href: `${base}/news`, icon: "newspaper", label: "最新情報 (News)" },
  { href: `${base}/works`, icon: "grid_view", label: "作品 (Works)" },
  { href: `${base}/projects`, icon: "folder_special", label: "プロジェクト (Projects)" },
  { href: `${base}/contact`, icon: "mail", label: "お問い合わせ (Contact)" },
];

function isActive(href: string): boolean {
  if (href === `${base}/` || href === base) return currentPath === `${base}/` || currentPath === base || currentPath === "/";
  return currentPath.startsWith(href);
}
---

<aside class="hidden md:flex flex-col w-64 h-screen sticky top-0 border-r border-gray-200/50 dark:border-gray-800/50 bg-background-light dark:bg-background-dark z-40 p-10 justify-between shrink-0">
  <!-- Logo Area -->
  <div class="flex flex-col gap-6">
    <a href={`${base}/`} class="flex flex-col gap-1">
      <h1 class="font-serif text-2xl font-bold tracking-widest text-text-main dark:text-white">{settings.artist_name}</h1>
      <p class="text-primary text-xs font-medium tracking-[0.2em] uppercase mt-2">{settings.artist_subtitle}</p>
    </a>
  </div>
  <!-- Navigation Links -->
  <nav class="flex flex-col gap-8">
    {navItems.map((item) => (
      <a
        class={`group flex items-center gap-4 transition-colors duration-300 ${
          isActive(item.href)
            ? "text-primary"
            : "text-text-muted hover:text-primary"
        }`}
        href={item.href}
      >
        <span class="material-symbols-outlined text-[20px] font-light">{item.icon}</span>
        <span class="text-sm font-medium tracking-wide group-hover:translate-x-1 transition-transform duration-300">{item.label}</span>
      </a>
    ))}
  </nav>
  <!-- Social -->
  <div class="flex flex-col gap-2">
    {settings.instagram_url && (
      <a class="group flex items-center gap-2.5" href={settings.instagram_url} target="_blank" rel="noopener noreferrer">
        <img src={`${base}/icons/instagram.png`} alt="Instagram" class="w-5 h-5 opacity-60 transition-opacity duration-300 group-hover:opacity-100" />
        <span class="text-[11px] leading-none text-text-muted transition-colors duration-300 group-hover:text-primary">
          {settings.instagram_handle}
        </span>
      </a>
    )}
    {settings.x_url && (
      <a class="group flex items-center gap-2.5" href={settings.x_url} target="_blank" rel="noopener noreferrer">
        <img src={`${base}/icons/x.png`} alt="X" class="w-5 h-5 opacity-60 transition-opacity duration-300 group-hover:opacity-100" />
        <span class="text-[11px] leading-none text-text-muted transition-colors duration-300 group-hover:text-primary">
          {settings.x_handle}
        </span>
      </a>
    )}
  </div>
</aside>
